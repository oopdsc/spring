/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dojox.highlight._base"]){dojo._hasResource["dojox.highlight._base"]=true;dojo.provide("dojox.highlight._base");(function(){var dh=dojox.highlight,_1="\\b(0x[A-Za-z0-9]+|\\d+(\\.\\d+)?)";dh.constants={IDENT_RE:"[a-zA-Z][a-zA-Z0-9_]*",UNDERSCORE_IDENT_RE:"[a-zA-Z_][a-zA-Z0-9_]*",NUMBER_RE:"\\b\\d+(\\.\\d+)?",C_NUMBER_RE:_1,APOS_STRING_MODE:{className:"string",begin:"'",end:"'",illegal:"\\n",contains:["escape"],relevance:0},QUOTE_STRING_MODE:{className:"string",begin:"\"",end:"\"",illegal:"\\n",contains:["escape"],relevance:0},BACKSLASH_ESCAPE:{className:"escape",begin:"\\\\.",end:"^",relevance:0},C_LINE_COMMENT_MODE:{className:"comment",begin:"//",end:"$",relevance:0},C_BLOCK_COMMENT_MODE:{className:"comment",begin:"/\\*",end:"\\*/"},HASH_COMMENT_MODE:{className:"comment",begin:"#",end:"$"},C_NUMBER_MODE:{className:"number",begin:_1,end:"^",relevance:0}};function esc(_2){return _2.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;");};function verifyText(_3){return dojo.every(_3.childNodes,function(_4){return _4.nodeType==3||String(_4.nodeName).toLowerCase()=="br";});};function blockText(_5){var _6=[];dojo.forEach(_5.childNodes,function(_7){if(_7.nodeType==3){_6.push(_7.nodeValue);}else{if(String(_7.nodeName).toLowerCase()=="br"){_6.push("\n");}else{throw "Complex markup";}}});return _6.join("");};function buildKeywordGroups(_8){if(!_8.keywordGroups){for(var _9 in _8.keywords){var kw=_8.keywords[_9];if(kw instanceof Object){_8.keywordGroups=_8.keywords;}else{_8.keywordGroups={keyword:_8.keywords};}break;}}};function buildKeywords(_a){if(_a.defaultMode&&_a.modes){buildKeywordGroups(_a.defaultMode);dojo.forEach(_a.modes,buildKeywordGroups);}};var _b=function(_c,_d){this.langName=_c;this.lang=dh.languages[_c];this.modes=[this.lang.defaultMode];this.relevance=0;this.keywordCount=0;this.result=[];if(!this.lang.defaultMode.illegalRe){this.buildRes();buildKeywords(this.lang);}try{this.highlight(_d);this.result=this.result.join("");}catch(e){if(e=="Illegal"){this.relevance=0;this.keywordCount=0;this.partialResult=this.result.join("");this.result=esc(_d);}else{throw e;}}};dojo.extend(_b,{buildRes:function $DAfq_(){dojo.forEach(this.lang.modes,function(_e){if(_e.begin){_e.beginRe=this.langRe("^"+_e.begin);}if(_e.end){_e.endRe=this.langRe("^"+_e.end);}if(_e.illegal){_e.illegalRe=this.langRe("^(?:"+_e.illegal+")");}},this);this.lang.defaultMode.illegalRe=this.langRe("^(?:"+this.lang.defaultMode.illegal+")");},subMode:function $DAfr_(_f){var _10=this.modes[this.modes.length-1].contains;if(_10){var _11=this.lang.modes;for(var i=0;i<_10.length;++i){var _12=_10[i];for(var j=0;j<_11.length;++j){var _13=_11[j];if(_13.className==_12&&_13.beginRe.test(_f)){return _13;}}}}return null;},endOfMode:function $DAfs_(_14){for(var i=this.modes.length-1;i>=0;--i){var _15=this.modes[i];if(_15.end&&_15.endRe.test(_14)){return this.modes.length-i;}if(!_15.endsWithParent){break;}}return 0;},isIllegal:function $DAft_(_16){var _17=this.modes[this.modes.length-1].illegalRe;return _17&&_17.test(_16);},langRe:function $DAfu_(_18,_19){var _1a="m"+(this.lang.case_insensitive?"i":"")+(_19?"g":"");return new RegExp(_18,_1a);},buildTerminators:function $DAfv_(){var _1b=this.modes[this.modes.length-1],_1c={};if(_1b.contains){dojo.forEach(this.lang.modes,function(_1d){if(dojo.indexOf(_1b.contains,_1d.className)>=0){_1c[_1d.begin]=1;}});}for(var i=this.modes.length-1;i>=0;--i){var m=this.modes[i];if(m.end){_1c[m.end]=1;}if(!m.endsWithParent){break;}}if(_1b.illegal){_1c[_1b.illegal]=1;}var t=[];for(i in _1c){t.push(i);}_1b.terminatorsRe=this.langRe("("+t.join("|")+")");},eatModeChunk:function $DAfw_(_1e,_1f){var _20=this.modes[this.modes.length-1];if(!_20.terminatorsRe){this.buildTerminators();}_1e=_1e.substr(_1f);var _21=_20.terminatorsRe.exec(_1e);if(!_21){return {buffer:_1e,lexeme:"",end:true};}return {buffer:_21.index?_1e.substr(0,_21.index):"",lexeme:_21[0],end:false};},keywordMatch:function $DAfx_(_22,_23){var _24=_23[0];if(this.lang.case_insensitive){_24=_24.toLowerCase();}for(var _25 in _22.keywordGroups){if(_24 in _22.keywordGroups[_25]){return _25;}}return "";},buildLexemes:function $DAfy_(_26){var _27={};dojo.forEach(_26.lexems,function(_28){_27[_28]=1;});var t=[];for(var i in _27){t.push(i);}_26.lexemsRe=this.langRe("("+t.join("|")+")",true);},processKeywords:function $DAfz_(_29){var _2a=this.modes[this.modes.length-1];if(!_2a.keywords||!_2a.lexems){return esc(_29);}if(!_2a.lexemsRe){this.buildLexemes(_2a);}_2a.lexemsRe.lastIndex=0;var _2b=[],_2c=0,_2d=_2a.lexemsRe.exec(_29);while(_2d){_2b.push(esc(_29.substr(_2c,_2d.index-_2c)));var _2e=this.keywordMatch(_2a,_2d);if(_2e){++this.keywordCount;_2b.push("<span class=\""+_2e+"\">"+esc(_2d[0])+"</span>");}else{_2b.push(esc(_2d[0]));}_2c=_2a.lexemsRe.lastIndex;_2d=_2a.lexemsRe.exec(_29);}_2b.push(esc(_29.substr(_2c,_29.length-_2c)));return _2b.join("");},processModeInfo:function $DAf0_(_2f,_30,end){var _31=this.modes[this.modes.length-1];if(end){this.result.push(this.processKeywords(_31.buffer+_2f));return;}if(this.isIllegal(_30)){throw "Illegal";}var _32=this.subMode(_30);if(_32){_31.buffer+=_2f;this.result.push(this.processKeywords(_31.buffer));if(_32.excludeBegin){this.result.push(_30+"<span class=\""+_32.className+"\">");_32.buffer="";}else{this.result.push("<span class=\""+_32.className+"\">");_32.buffer=_30;}this.modes.push(_32);this.relevance+=typeof _32.relevance=="number"?_32.relevance:1;return;}var _33=this.endOfMode(_30);if(_33){_31.buffer+=_2f;if(_31.excludeEnd){this.result.push(this.processKeywords(_31.buffer)+"</span>"+_30);}else{this.result.push(this.processKeywords(_31.buffer+_30)+"</span>");}while(_33>1){this.result.push("</span>");--_33;this.modes.pop();}this.modes.pop();this.modes[this.modes.length-1].buffer="";return;}},highlight:function $DAf1_(_34){var _35=0;this.lang.defaultMode.buffer="";do{var _36=this.eatModeChunk(_34,_35);this.processModeInfo(_36.buffer,_36.lexeme,_36.end);_35+=_36.buffer.length+_36.lexeme.length;}while(!_36.end);if(this.modes.length>1){throw "Illegal";}}});function replaceText(_37,_38,_39){if(String(_37.tagName).toLowerCase()=="code"&&String(_37.parentNode.tagName).toLowerCase()=="pre"){var _3a=document.createElement("div"),_3b=_37.parentNode.parentNode;_3a.innerHTML="<pre><code class=\""+_38+"\">"+_39+"</code></pre>";_3b.replaceChild(_3a.firstChild,_37.parentNode);}else{_37.className=_38;_37.innerHTML=_39;}};function highlightStringLanguage(_3c,str){var _3d=new _b(_3c,str);return {result:_3d.result,langName:_3c,partialResult:_3d.partialResult};};function highlightLanguage(_3e,_3f){var _40=highlightStringLanguage(_3f,blockText(_3e));replaceText(_3e,_3e.className,_40.result);};function highlightStringAuto(str){var _41="",_42="",_43=2,_44=str;for(var key in dh.languages){if(!dh.languages[key].defaultMode){continue;}var _45=new _b(key,_44),_46=_45.keywordCount+_45.relevance,_47=0;if(!_41||_46>_47){_47=_46;_41=_45.result;_42=_45.langName;}}return {result:_41,langName:_42};};function highlightAuto(_48){var _49=highlightStringAuto(blockText(_48));if(_49.result){replaceText(_48,_49.langName,_49.result);}};dojox.highlight.processString=function $DAf2_(str,_4a){return _4a?highlightStringLanguage(_4a,str):highlightStringAuto(str);};dojox.highlight.init=function $DAf3_(_4b){_4b=dojo.byId(_4b);if(dojo.hasClass(_4b,"no-highlight")){return;}if(!verifyText(_4b)){return;}var _4c=_4b.className.split(/\s+/),_4d=dojo.some(_4c,function(_4e){if(_4e.charAt(0)!="_"&&dh.languages[_4e]){highlightLanguage(_4b,_4e);return true;}return false;});if(!_4d){highlightAuto(_4b);}};dh.Code=function $DAf5_(p,n){dh.init(n);};})();}