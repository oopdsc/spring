/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dojox.xml.DomParser"]){dojo._hasResource["dojox.xml.DomParser"]=true;dojo.provide("dojox.xml.DomParser");dojox.xml.DomParser=new (function(){var _1={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9};var _2=/<([^>\/\s+]*)([^>]*)>([^<]*)/g;var _3=/([^=]*)=(("([^"]*)")|('([^']*)'))/g;var _4=/<!ENTITY\s+([^"]*)\s+"([^"]*)">/g;var _5=/<!\[CDATA\[([\u0001-\uFFFF]*?)\]\]>/g;var _6=/<!--([\u0001-\uFFFF]*?)-->/g;var _7=/^\s+|\s+$/g;var _8=/\s+/g;var _9=/\&gt;/g;var _a=/\&lt;/g;var _b=/\&quot;/g;var _c=/\&apos;/g;var _d=/\&amp;/g;var _e="_def_";function _doc(){return new (function(){var _f={};this.nodeType=_1.DOCUMENT;this.nodeName="#document";this.namespaces={};this._nsPaths={};this.childNodes=[];this.documentElement=null;this._add=function $DA7W_(obj){if(typeof (obj.id)!="undefined"){_f[obj.id]=obj;}};this._remove=function $DA7X_(id){if(_f[id]){delete _f[id];}};this.byId=this.getElementById=function(id){return _f[id];};this.byName=this.getElementsByTagName=byName;this.byNameNS=this.getElementsByTagNameNS=byNameNS;this.childrenByName=childrenByName;this.childrenByNameNS=childrenByNameNS;})();};function byName(_10){function __(_11,_12,arr){dojo.forEach(_11.childNodes,function(c){if(c.nodeType==_1.ELEMENT){if(_12=="*"){arr.push(c);}else{if(c.nodeName==_12){arr.push(c);}}__(c,_12,arr);}});};var a=[];__(this,_10,a);return a;};function byNameNS(_13,ns){function __(_14,_15,ns,arr){dojo.forEach(_14.childNodes,function(c){if(c.nodeType==_1.ELEMENT){if(_15=="*"&&c.ownerDocument._nsPaths[ns]==c.namespace){arr.push(c);}else{if(c.localName==_15&&c.ownerDocument._nsPaths[ns]==c.namespace){arr.push(c);}}__(c,_15,ns,arr);}});};if(!ns){ns=_e;}var a=[];__(this,_13,ns,a);return a;};function childrenByName(_16){var a=[];dojo.forEach(this.childNodes,function(c){if(c.nodeType==_1.ELEMENT){if(_16=="*"){a.push(c);}else{if(c.nodeName==_16){a.push(c);}}}});return a;};function childrenByNameNS(_17,ns){var a=[];dojo.forEach(this.childNodes,function(c){if(c.nodeType==_1.ELEMENT){if(_17=="*"&&c.ownerDocument._nsPaths[ns]==c.namespace){a.push(c);}else{if(c.localName==_17&&c.ownerDocument._nsPaths[ns]==c.namespace){a.push(c);}}}});return a;};function _createTextNode(v){return {nodeType:_1.TEXT,nodeName:"#text",nodeValue:v.replace(_8," ").replace(_9,">").replace(_a,"<").replace(_c,"'").replace(_b,"\"").replace(_d,"&")};};function getAttr(_18){for(var i=0;i<this.attributes.length;i++){if(this.attributes[i].nodeName==_18){return this.attributes[i].nodeValue;}}return null;};function getAttrNS(_19,ns){for(var i=0;i<this.attributes.length;i++){if(this.ownerDocument._nsPaths[ns]==this.attributes[i].namespace&&this.attributes[i].localName==_19){return this.attributes[i].nodeValue;}}return null;};function setAttr(_1a,val){var old=null;for(var i=0;i<this.attributes.length;i++){if(this.attributes[i].nodeName==_1a){old=this.attributes[i].nodeValue;this.attributes[i].nodeValue=val;break;}}if(_1a=="id"){if(old!=null){this.ownerDocument._remove(old);}this.ownerDocument._add(this);}};function setAttrNS(_1b,val,ns){for(var i=0;i<this.attributes.length;i++){if(this.ownerDocument._nsPaths[ns]==this.attributes[i].namespace&&this.attributes[i].localName==_1b){this.attributes[i].nodeValue=val;return;}}};function prev(){var p=this.parentNode;if(p){for(var i=0;i<p.childNodes.length;i++){if(p.childNodes[i]==this&&i>0){return p.childNodes[i-1];}}}return null;};function next(){var p=this.parentNode;if(p){for(var i=0;i<p.childNodes.length;i++){if(p.childNodes[i]==this&&(i+1)<p.childNodes.length){return p.childNodes[i+1];}}}return null;};this.parse=function $DA7Y_(str){var _1c=_doc();if(str==null){return _1c;}if(str.length==0){return _1c;}if(str.indexOf("<!ENTITY")>0){var _1d,eRe=[];if(_4.test(str)){_4.lastIndex=0;while((_1d=_4.exec(str))!=null){eRe.push({entity:"&"+_1d[1].replace(_7,"")+";",expression:_1d[2]});}for(var i=0;i<eRe.length;i++){str=str.replace(new RegExp(eRe[i].entity,"g"),eRe[i].expression);}}}var _1e=[],_1f;while((_1f=_5.exec(str))!=null){_1e.push(_1f[1]);}for(var i=0;i<_1e.length;i++){str=str.replace(_1e[i],i);}var _20=[],_21;while((_21=_6.exec(str))!=null){_20.push(_21[1]);}for(i=0;i<_20.length;i++){str=str.replace(_20[i],i);}var res,obj=_1c;while((res=_2.exec(str))!=null){if(res[2].charAt(0)=="/"&&res[2].replace(_7,"").length>1){if(obj.parentNode){obj=obj.parentNode;}var _22=(res[3]||"").replace(_7,"");if(_22.length>0){obj.childNodes.push(_createTextNode(_22));}}else{if(res[1].length>0){if(res[1].charAt(0)=="?"){var _23=res[1].substr(1);var _24=res[2].substr(0,res[2].length-2);obj.childNodes.push({nodeType:_1.PROCESSING_INSTRUCTION,nodeName:_23,nodeValue:_24});}else{if(res[1].charAt(0)=="!"){if(res[1].indexOf("![CDATA[")==0){var val=parseInt(res[1].replace("![CDATA[","").replace("]]",""));obj.childNodes.push({nodeType:_1.CDATA_SECTION,nodeName:"#cdata-section",nodeValue:_1e[val]});}else{if(res[1].substr(0,3)=="!--"){var val=parseInt(res[1].replace("!--","").replace("--",""));obj.childNodes.push({nodeType:_1.COMMENT,nodeName:"#comment",nodeValue:_20[val]});}}}else{var _23=res[1].replace(_7,"");var o={nodeType:_1.ELEMENT,nodeName:_23,localName:_23,namespace:_e,ownerDocument:_1c,attributes:[],parentNode:null,childNodes:[]};if(_23.indexOf(":")>-1){var t=_23.split(":");o.namespace=t[0];o.localName=t[1];}o.byName=o.getElementsByTagName=byName;o.byNameNS=o.getElementsByTagNameNS=byNameNS;o.childrenByName=childrenByName;o.childrenByNameNS=childrenByNameNS;o.getAttribute=getAttr;o.getAttributeNS=getAttrNS;o.setAttribute=setAttr;o.setAttributeNS=setAttrNS;o.previous=o.previousSibling=prev;o.next=o.nextSibling=next;var _25;while((_25=_3.exec(res[2]))!=null){if(_25.length>0){var _23=_25[1].replace(_7,"");var val=(_25[4]||_25[6]||"").replace(_8," ").replace(_9,">").replace(_a,"<").replace(_c,"'").replace(_b,"\"").replace(_d,"&");if(_23.indexOf("xmlns")==0){if(_23.indexOf(":")>0){var ns=_23.split(":");_1c.namespaces[ns[1]]=val;_1c._nsPaths[val]=ns[1];}else{_1c.namespaces[_e]=val;_1c._nsPaths[val]=_e;}}else{var ln=_23;var ns=_e;if(_23.indexOf(":")>0){var t=_23.split(":");ln=t[1];ns=t[0];}o.attributes.push({nodeType:_1.ATTRIBUTE,nodeName:_23,localName:ln,namespace:ns,nodeValue:val});if(ln=="id"){o.id=val;}}}}_1c._add(o);if(obj){obj.childNodes.push(o);o.parentNode=obj;if(res[2].charAt(res[2].length-1)!="/"){obj=o;}}var _22=res[3];if(_22.length>0){obj.childNodes.push(_createTextNode(_22));}}}}}}for(var i=0;i<_1c.childNodes.length;i++){var e=_1c.childNodes[i];if(e.nodeType==_1.ELEMENT){_1c.documentElement=e;break;}}return _1c;};})();}