/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dojox.uuid.generateTimeBasedUuid"]){dojo._hasResource["dojox.uuid.generateTimeBasedUuid"]=true;dojo.provide("dojox.uuid.generateTimeBasedUuid");dojox.uuid.generateTimeBasedUuid=function $DAxR_(_1){var _2=dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(_1);return _2;};dojox.uuid.generateTimeBasedUuid.isValidNode=function $DAxS_(_3){var _4=16;var _5=parseInt(_3,_4);var _6=dojo.isString(_3)&&_3.length==12&&isFinite(_5);return _6;};dojox.uuid.generateTimeBasedUuid.setNode=function $DAxT_(_7){dojox.uuid.assert((_7===null)||this.isValidNode(_7));this._uniformNode=_7;};dojox.uuid.generateTimeBasedUuid.getNode=function $DAxU_(){return this._uniformNode;};dojox.uuid.generateTimeBasedUuid._generator=new function(){this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;var _8=null;var _9=null;var _a=null;var _b=0;var _c=null;var _d=null;var _e=16;function _carry(_f){_f[2]+=_f[3]>>>16;_f[3]&=65535;_f[1]+=_f[2]>>>16;_f[2]&=65535;_f[0]+=_f[1]>>>16;_f[1]&=65535;dojox.uuid.assert((_f[0]>>>16)===0);};function _get64bitArrayFromFloat(x){var _10=new Array(0,0,0,0);_10[3]=x%65536;x-=_10[3];x/=65536;_10[2]=x%65536;x-=_10[2];x/=65536;_10[1]=x%65536;x-=_10[1];x/=65536;_10[0]=x;return _10;};function _addTwo64bitArrays(_11,_12){dojox.uuid.assert(dojo.isArray(_11));dojox.uuid.assert(dojo.isArray(_12));dojox.uuid.assert(_11.length==4);dojox.uuid.assert(_12.length==4);var _13=new Array(0,0,0,0);_13[3]=_11[3]+_12[3];_13[2]=_11[2]+_12[2];_13[1]=_11[1]+_12[1];_13[0]=_11[0]+_12[0];_carry(_13);return _13;};function _multiplyTwo64bitArrays(_14,_15){dojox.uuid.assert(dojo.isArray(_14));dojox.uuid.assert(dojo.isArray(_15));dojox.uuid.assert(_14.length==4);dojox.uuid.assert(_15.length==4);var _16=false;if(_14[0]*_15[0]!==0){_16=true;}if(_14[0]*_15[1]!==0){_16=true;}if(_14[0]*_15[2]!==0){_16=true;}if(_14[1]*_15[0]!==0){_16=true;}if(_14[1]*_15[1]!==0){_16=true;}if(_14[2]*_15[0]!==0){_16=true;}dojox.uuid.assert(!_16);var _17=new Array(0,0,0,0);_17[0]+=_14[0]*_15[3];_carry(_17);_17[0]+=_14[1]*_15[2];_carry(_17);_17[0]+=_14[2]*_15[1];_carry(_17);_17[0]+=_14[3]*_15[0];_carry(_17);_17[1]+=_14[1]*_15[3];_carry(_17);_17[1]+=_14[2]*_15[2];_carry(_17);_17[1]+=_14[3]*_15[1];_carry(_17);_17[2]+=_14[2]*_15[3];_carry(_17);_17[2]+=_14[3]*_15[2];_carry(_17);_17[3]+=_14[3]*_15[3];_carry(_17);return _17;};function _padWithLeadingZeros(_18,_19){while(_18.length<_19){_18="0"+_18;}return _18;};function _generateRandomEightCharacterHexString(){var _1a=Math.floor((Math.random()%1)*Math.pow(2,32));var _1b=_1a.toString(_e);while(_1b.length<8){_1b="0"+_1b;}return _1b;};this.generateUuidString=function $DAxQ_(_1c){if(_1c){dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(_1c));}else{if(dojox.uuid.generateTimeBasedUuid._uniformNode){_1c=dojox.uuid.generateTimeBasedUuid._uniformNode;}else{if(!_8){var _1d=32768;var _1e=Math.floor((Math.random()%1)*Math.pow(2,15));var _1f=(_1d|_1e).toString(_e);_8=_1f+_generateRandomEightCharacterHexString();}_1c=_8;}}if(!_9){var _20=32768;var _21=Math.floor((Math.random()%1)*Math.pow(2,14));_9=(_20|_21).toString(_e);}var now=new Date();var _22=now.valueOf();var _23=_get64bitArrayFromFloat(_22);if(!_c){var _24=_get64bitArrayFromFloat(60*60);var _25=_get64bitArrayFromFloat(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS);var _26=_multiplyTwo64bitArrays(_25,_24);var _27=_get64bitArrayFromFloat(1000);_c=_multiplyTwo64bitArrays(_26,_27);_d=_get64bitArrayFromFloat(10000);}var _28=_23;var _29=_addTwo64bitArrays(_c,_28);var _2a=_multiplyTwo64bitArrays(_29,_d);if(now.valueOf()==_a){_2a[3]+=_b;_carry(_2a);_b+=1;if(_b==10000){while(now.valueOf()==_a){now=new Date();}}}else{_a=now.valueOf();_b=1;}var _2b=_2a[2].toString(_e);var _2c=_2a[3].toString(_e);var _2d=_padWithLeadingZeros(_2b,4)+_padWithLeadingZeros(_2c,4);var _2e=_2a[1].toString(_e);_2e=_padWithLeadingZeros(_2e,4);var _2f=_2a[0].toString(_e);_2f=_padWithLeadingZeros(_2f,3);var _30="-";var _31="1";var _32=_2d+_30+_2e+_30+_31+_2f+_30+_9+_30+_1c;_32=_32.toLowerCase();return _32;};}();}