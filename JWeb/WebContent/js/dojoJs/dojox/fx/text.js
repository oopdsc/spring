/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dojox.fx.text"]){dojo._hasResource["dojox.fx.text"]=true;dojo.provide("dojox.fx.text");dojo.require("dojo.fx");dojo.require("dojo.fx.easing");dojox.fx.text._split=function $DAF4_(_1){var _2=_1.node=dojo.byId(_1.node),s=_2.style,cs=dojo.getComputedStyle(_2),_3=dojo.coords(_2,true);_1.duration=_1.duration||1000;_1.words=_1.words||false;var _4=(_1.text&&typeof (_1.text)=="string")?_1.text:_2.innerHTML,_5=s.height,_6=s.width,_7=[];dojo.style(_2,{height:cs.height,width:cs.width});var _8=/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)/g;var _9=(_1.words?/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]+\s*)/g:/(<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)\/?>)\s*|([^\s<]\s*)/g);var _a=(typeof _1.text=="string")?_1.text.match(_9):_2.innerHTML.match(_9);var _b="";var _c=0;var _d=0;for(var i=0;i<_a.length;i++){var _e=_a[i];if(!_e.match(_8)){_b+="<span>"+_e+"</span>";_c++;}else{_b+=_e;}}_2.innerHTML=_b;function animatePieces(_f){var _10=_f.nextSibling;if(_f.tagName=="SPAN"&&_f.childNodes.length==1&&_f.firstChild.nodeType==3){var _11=dojo.coords(_f,true);_d++;dojo.style(_f,{padding:0,margin:0,top:(_1.crop?"0px":_11.t+"px"),left:(_1.crop?"0px":_11.l+"px"),display:"inline"});var _12=_1.pieceAnimation(_f,_11,_3,_d,_c);if(dojo.isArray(_12)){_7=_7.concat(_12);}else{_7[_7.length]=_12;}}else{if(_f.firstChild){animatePieces(_f.firstChild);}}if(_10){animatePieces(_10);}};animatePieces(_2.firstChild);var _13=dojo.fx.combine(_7);dojo.connect(_13,"onEnd",_13,function(){_2.innerHTML=_4;dojo.style(_2,{height:_5,width:_6});});if(_1.onPlay){dojo.connect(_13,"onPlay",_13,_1.onPlay);}if(_1.onEnd){dojo.connect(_13,"onEnd",_13,_1.onEnd);}return _13;};dojox.fx.text.explode=function $DAF5_(_14){var _15=_14.node=dojo.byId(_14.node);var s=_15.style;_14.distance=_14.distance||1;_14.duration=_14.duration||1000;_14.random=_14.random||0;if(typeof (_14.fade)=="undefined"){_14.fade=true;}if(typeof (_14.sync)=="undefined"){_14.sync=true;}_14.random=Math.abs(_14.random);_14.pieceAnimation=function $DAF6_(_16,_17,_18,_19,_1a){var _1b=_17.h;var _1c=_17.w;var _1d=_14.distance*2;var _1e=_14.duration;var _1f=parseFloat(_16.style.top);var _20=parseFloat(_16.style.left);var _21=0;var _22=0;var _23=0;if(_14.random){var _24=(Math.random()*_14.random)+Math.max(1-_14.random,0);_1d*=_24;_1e*=_24;_21=((_14.unhide&&_14.sync)||(!_14.unhide&&!_14.sync))?(_14.duration-_1e):0;_22=Math.random()-0.5;_23=Math.random()-0.5;}var _25=((_18.h-_1b)/2-(_17.y-_18.y));var _26=((_18.w-_1c)/2-(_17.x-_18.x));var _27=Math.sqrt(Math.pow(_26,2)+Math.pow(_25,2));var _28=_1f-_25*_1d+_27*_23;var _29=_20-_26*_1d+_27*_22;var _2a=dojo.animateProperty({node:_16,duration:_1e,delay:_21,easing:(_14.easing||(_14.unhide?dojo.fx.easing.sinOut:dojo.fx.easing.circOut)),beforeBegin:(_14.unhide?function(){if(_14.fade){dojo.style(_16,"opacity",0);}_16.style.position=_14.crop?"relative":"absolute";_16.style.top=_28+"px";_16.style.left=_29+"px";}:function(){_16.style.position=_14.crop?"relative":"absolute";}),properties:{top:(_14.unhide?{start:_28,end:_1f}:{start:_1f,end:_28}),left:(_14.unhide?{start:_29,end:_20}:{start:_20,end:_29})}});if(_14.fade){var _2b=dojo.animateProperty({node:_16,duration:_1e,delay:_21,easing:(_14.fadeEasing||dojo.fx.easing.quadOut),properties:{opacity:(_14.unhide?{start:0,end:1}:{end:0})}});return (_14.unhide?[_2b,_2a]:[_2a,_2b]);}else{return _2a;}};var _2c=dojox.fx.text._split(_14);return _2c;};dojox.fx.text.converge=function $DAF7_(_2d){_2d.unhide=true;return dojox.fx.text.explode(_2d);};dojox.fx.text.disintegrate=function $DAF8_(_2e){var _2f=_2e.node=dojo.byId(_2e.node);var s=_2f.style;_2e.duration=_2e.duration||1500;_2e.distance=_2e.distance||1.5;_2e.random=_2e.random||0;if(!_2e.fade){_2e.fade=true;}var _30=Math.abs(_2e.random);_2e.pieceAnimation=function $DAF9_(_31,_32,_33,_34,_35){var _36=_32.h;var _37=_32.w;var _38=_2e.interval||(_2e.duration/(1.5*_35));var _39=(_2e.duration-_35*_38);var _3a=Math.random()*_35*_38;var _3b=(_2e.reverseOrder||_2e.distance<0)?(_34*_38):((_35-_34)*_38);var _3c=_3a*_30+Math.max(1-_30,0)*_3b;var _3d={};if(_2e.unhide){_3d.top={start:(parseFloat(_31.style.top)-_33.h*_2e.distance),end:parseFloat(_31.style.top)};if(_2e.fade){_3d.opacity={start:0,end:1};}}else{_3d.top={end:(parseFloat(_31.style.top)+_33.h*_2e.distance)};if(_2e.fade){_3d.opacity={end:0};}}var _3e=dojo.animateProperty({node:_31,duration:_39,delay:_3c,easing:(_2e.easing||(_2e.unhide?dojo.fx.easing.sinIn:dojo.fx.easing.circIn)),properties:_3d,beforeBegin:(_2e.unhide?function(){if(_2e.fade){dojo.style(_31,"opacity",0);}_31.style.position=_2e.crop?"relative":"absolute";_31.style.top=_3d.top.start+"px";}:function(){_31.style.position=_2e.crop?"relative":"absolute";})});return _3e;};var _3f=dojox.fx.text._split(_2e);return _3f;};dojox.fx.text.build=function $DAGA_(_40){_40.unhide=true;return dojox.fx.text.disintegrate(_40);};dojox.fx.text.blockFadeOut=function $DAGB_(_41){var _42=_41.node=dojo.byId(_41.node);var s=_42.style;_41.duration=_41.duration||1000;_41.random=_41.random||0;var _43=Math.abs(_41.random);_41.pieceAnimation=function $DAGC_(_44,_45,_46,_47,_48){var _49=_41.interval||(_41.duration/(1.5*_48));var _4a=(_41.duration-_48*_49);var _4b=Math.random()*_48*_49;var _4c=(_41.reverseOrder)?((_48-_47)*_49):(_47*_49);var _4d=_4b*_43+Math.max(1-_43,0)*_4c;var _4e=dojo.animateProperty({node:_44,duration:_4a,delay:_4d,easing:(_41.easing||dojo.fx.easing.sinInOut),properties:{opacity:(_41.unhide?{start:0,end:1}:{end:0})},beforeBegin:(_41.unhide?function(){dojo.style(_44,"opacity",0);}:undefined)});return _4e;};var _4f=dojox.fx.text._split(_41);return _4f;};dojox.fx.text.blockFadeIn=function $DAGD_(_50){_50.unhide=true;return dojox.fx.text.blockFadeOut(_50);};dojox.fx.text.backspace=function $DAGE_(_51){var _52=_51.node=dojo.byId(_51.node);var s=_52.style;_51.words=false;_51.duration=_51.duration||2000;_51.random=_51.random||0;var _53=Math.abs(_51.random);var _54=10;_51.pieceAnimation=function $DAGF_(_55,_56,_57,_58,_59){var _5a=_51.interval||(_51.duration/(1.5*_59));var _5b=_55.textContent;var _5c=_5b.match(/\s/g);if(typeof (_51.wordDelay)=="undefined"){_51.wordDelay=_5a*2;}if(!_51.unhide){_54=(_59-_58-1)*_5a;}var _5d,_5e;if(_51.fixed){if(_51.unhide){var _5d=function(){dojo.style(_55,"opacity",0);};}}else{if(_51.unhide){var _5d=function(){_55.style.display="none";};var _5e=function(){_55.style.display="inline";};}else{var _5e=function(){_55.style.display="none";};}}var _5f=dojo.animateProperty({node:_55,duration:1,delay:_54,easing:(_51.easing||dojo.fx.easing.sinInOut),properties:{opacity:(_51.unhide?{start:0,end:1}:{end:0})},beforeBegin:_5d,onEnd:_5e});if(_51.unhide){var _60=Math.random()*_5b.length*_5a;var _61=_60*_53/2+Math.max(1-_53/2,0)*_51.wordDelay;_54+=_60*_53+Math.max(1-_53,0)*_5a*_5b.length+(_61*(_5c&&_5b.lastIndexOf(_5c[_5c.length-1])==_5b.length-1));}return _5f;};var _62=dojox.fx.text._split(_51);return _62;};dojox.fx.text.type=function $DAGG_(_63){_63.unhide=true;return dojox.fx.text.backspace(_63);};}