/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated],{baseClass:"",name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function $DGt_(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},_setDisabledAttr:function $DGu_(_1){this.disabled=_1;dojo.attr(this.focusNode,"disabled",_1);if(this.valueNode){dojo.attr(this.valueNode,"disabled",_1);}dijit.setWaiState(this.focusNode,"disabled",_1);if(_1){this._hovering=false;this._active=false;this.focusNode.setAttribute("tabIndex","-1");}else{this.focusNode.setAttribute("tabIndex",this.tabIndex);}this._setStateClass();},setDisabled:function $DGv_(_2){dojo.deprecated("setDisabled("+_2+") is deprecated. Use attr('disabled',"+_2+") instead.","","2.0");this.attr("disabled",_2);},_onFocus:function $DGw_(e){if(this.scrollOnFocus){dijit.scrollIntoView(this.domNode);}this.inherited(arguments);},_onMouse:function $DGx_(_3){var _4=_3.currentTarget;if(_4&&_4.getAttribute){this.stateModifier=_4.getAttribute("stateModifier")||"";}if(!this.disabled){switch(_3.type){case "mouseenter":case "mouseover":this._hovering=true;this._active=this._mouseDown;break;case "mouseout":case "mouseleave":this._hovering=false;this._active=false;break;case "mousedown":this._active=true;this._mouseDown=true;var _5=this.connect(dojo.body(),"onmouseup",function(){if(this._mouseDown&&this.isFocusable()){this.focus();}this._active=false;this._mouseDown=false;this._setStateClass();this.disconnect(_5);});break;}this._setStateClass();}},isFocusable:function $DGy_(){return !this.disabled&&!this.readOnly&&this.focusNode&&(dojo.style(this.domNode,"display")!="none");},focus:function $DGz_(){dijit.focus(this.focusNode);},_setStateClass:function $DG0_(){var _6=this.baseClass.split(" ");function multiply(_7){_6=_6.concat(dojo.map(_6,function(c){return c+_7;}),"dijit"+_7);};if(this.checked){multiply("Checked");}if(this.state){multiply(this.state);}if(this.selected){multiply("Selected");}if(this.disabled){multiply("Disabled");}else{if(this.readOnly){multiply("ReadOnly");}else{if(this._active){multiply(this.stateModifier+"Active");}else{if(this._focused){multiply("Focused");}if(this._hovering){multiply(this.stateModifier+"Hover");}}}}var tn=this.stateNode||this.domNode,_8={};dojo.forEach(tn.className.split(" "),function(c){_8[c]=true;});if("_stateClasses" in this){dojo.forEach(this._stateClasses,function(c){delete _8[c];});}dojo.forEach(_6,function(c){_8[c]=true;});var _9=[];for(var c in _8){_9.push(c);}tn.className=_9.join(" ");this._stateClasses=_6;},compare:function $DG1_(_a,_b){if(typeof _a=="number"&&typeof _b=="number"){return (isNaN(_a)&&isNaN(_b))?0:_a-_b;}else{if(_a>_b){return 1;}else{if(_a<_b){return -1;}else{return 0;}}}},onChange:function $DG2_(_c){},_onChangeActive:false,_handleOnChange:function $DG3_(_d,_e){this._lastValue=_d;if(this._lastValueReported==undefined&&(_e===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_d;}if((this.intermediateChanges||_e||_e===undefined)&&((typeof _d!=typeof this._lastValueReported)||this.compare(_d,this._lastValueReported)!=0)){this._lastValueReported=_d;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_d);}),0);}}},create:function $DG4_(){this.inherited(arguments);this._onChangeActive=true;this._setStateClass();},destroy:function $DG5_(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported);}this.inherited(arguments);},setValue:function $DG6_(_f){dojo.deprecated("dijit.form._FormWidget:setValue("+_f+") is deprecated.  Use attr('value',"+_f+") instead.","","2.0");this.attr("value",_f);},getValue:function $DG7_(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value");}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function $DG8_(_10){this.readOnly=_10;dojo.attr(this.focusNode,"readOnly",_10);dijit.setWaiState(this.focusNode,"readonly",_10);this._setStateClass();},postCreate:function $DG9_(){if(dojo.isIE){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._resetValue=this.value;}},_setValueAttr:function $DHA_(_11,_12){this.value=_11;this._handleOnChange(_11,_12);},_getValueAttr:function $DHB_(){return this._lastValue;},undo:function $DHC_(){this._setValueAttr(this._lastValueReported,false);},reset:function $DHD_(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function $DHE_(e){if(e.keyCode==dojo.keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){var te;if(dojo.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}}},_layoutHackIE7:function $DHF_(){if(dojo.isIE==7){var _13=this.domNode;var _14=_13.parentNode;var _15=_13.firstChild||_13;var _16=_15.style.filter;var _17=this;while(_14&&_14.clientHeight==0){(function ping(){var _18=_17.connect(_14,"onscroll",function(e){_17.disconnect(_18);_15.style.filter=(new Date()).getMilliseconds();setTimeout(function(){_15.style.filter=_16;},0);});})();_14=_14.parentNode;}}}});}